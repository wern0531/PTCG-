import{_ as b,a as f,R as y,c as a,b as t,n as r,F as x,j as w,e as m,w as C,t as p,q as k,r as h,o as _,u as V,v as S,p as I,f as P}from"./index-614f490f.js";import{c as T}from"./cart-6c2d267a.js";import"./sweetalert2.all-57a97fe1.js";const D="/production-sub-path/assets/town_league-efac9861.png",E="/production-sub-path/assets/regional_league-4b79f9c4.png",R="/production-sub-path/assets/championships-075c3d46.png",B="/production-sub-path/assets/wcs-4667db09.png";const{VITE_URL:q,VITE_PATH:U}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/production-sub-path/",MODE:"production",DEV:!1,PROD:!0},j={data(){return{carts:[],loadingItem:"",currentPath:"/cart"}},methods:{...f(T,["getCarts","delCart"]),updateQty(s,i,l,u){let c={};u==="add"?c={product_id:s,qty:i+=1}:u==="reduce"&&(c={product_id:s,qty:i-=1}),this.loadingItem=s,this.$http.put(`${q}v2/api/${U}/cart/${l}`,{data:c}).then(o=>{this.getCarts(),this.loadingItem=""}).catch(o=>{alert(o.response.data.message)})},calculateFinalTotal(s){return s.reduce((i,l)=>i+l.total,0)},nextStep(){this.$router.push("/cart/information")},isCurrentPath(s){return this.currentPath.includes(s)}},computed:{cartsData(){return this.$pinia.state.value.cart.carts}},watch:{$route:function(s,i){this.currentPath=s.path}},components:{RouterView:y},mounted(){this.getCarts()}},n=s=>(I("data-v-128fd251"),s=s(),P(),s),N={class:"container"},A={class:"row my-5 align-items-stretch"},F={class:"col-lg-3"},L=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:D,alt:""})],-1)),O=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 商品確認 ",-1)),M=[O],Q={class:"col-lg-3"},H=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:E,alt:""})],-1)),$=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 填寫資料 ",-1)),z=[$],G={class:"col-lg-3"},J=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:R,alt:""})],-1)),K=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 確認訂單 ",-1)),W=[K],X={class:"col-lg-3"},Y=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{class:"mb-2",src:B,alt:""})],-1)),Z=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 完成訂單 ",-1)),tt=[Z],et={key:0},st={class:"cartItem row p-3 mb-2 border border-btnBg rounded-3 d-flex align-items-center"},ot={class:"col-lg-2"},nt=["src"],ct={class:"mt-2 mt-lg-0 col-lg-3"},it={class:"mt-2 mt-lg-0 col-lg-2"},lt={class:"input-group"},dt=["onClick","disabled"],at=["onUpdate:modelValue"],rt=["onClick","disabled"],_t={class:"mt-2 mt-lg-0 col-lg-3"},ut=["onClick"],pt=n(()=>t("span",{type:"button",class:"material-symbols-outlined"}," delete ",-1)),mt=[pt],ht={class:"mt-3 row d-flex align-items-center"},gt={class:"col-lg-2"},vt=n(()=>t("div",{class:"material-symbols-outlined"},"arrow_back",-1)),bt=n(()=>t("div",null,"繼續選購",-1)),ft={class:"col-lg-5 d-flex ms-auto align-items-center"},yt={class:"col-lg-6"},xt={class:"col-lg-4 ms-auto"};function wt(s,i,l,u,c,o){const g=h("router-link"),v=h("RouterView");return _(),a("div",N,[t("div",A,[t("div",F,[L,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart"}])},M,2)]),t("div",Q,[H,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart/information"}])},z,2)]),t("div",G,[J,t("div",{class:r(["step mt-3",{nowStep:o.isCurrentPath("/cart/checkOrder")}])},W,2)]),t("div",X,[Y,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart/completeOrder"}])},tt,2)])]),c.currentPath==="/cart"?(_(),a("div",et,[(_(!0),a(x,null,w(o.cartsData,e=>(_(),a("div",{class:"",key:e.id},[t("div",st,[t("div",ot,[t("img",{style:{width:"100px"},src:e.product.imageUrl,alt:""},null,8,nt)]),t("div",ct,p(e.product.title),1),t("div",it,[t("div",lt,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:d=>o.updateQty(e.product_id,e.qty,e.id,"reduce"),disabled:e.product.id===c.loadingItem}," - ",8,dt),V(t("input",{type:"text",class:"btn form-control text-center","onUpdate:modelValue":d=>e.qty=d,min:"0",disabled:""},null,8,at),[[S,e.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-outline-secondary",type:"button",onClick:d=>o.updateQty(e.product_id,e.qty,e.id,"add"),disabled:e.product.id===c.loadingItem}," + ",8,rt)])]),t("div",_t,"$NT"+p(e.total),1),t("div",{class:"mt-2 mt-lg-0 col-lg-2 delBtn",onClick:d=>s.delCart(e.id,e.product.title)},mt,8,ut)])]))),128)),t("div",ht,[t("div",gt,[m(g,{type:"button",class:"btn d-flex btn-myBgMain",to:"/products/全部商品"},{default:C(()=>[vt,bt]),_:1})]),t("div",ft,[t("div",yt," 總計: $NT"+p(o.calculateFinalTotal(o.cartsData)),1),t("div",xt,[t("button",{type:"button",class:"btn text-myColor border-myColor btn-hover",onClick:i[0]||(i[0]=(...e)=>o.nextStep&&o.nextStep(...e))},"確認訂單")])])])])):k("",!0),m(v)])}const St=b(j,[["render",wt],["__scopeId","data-v-128fd251"]]);export{St as default};
