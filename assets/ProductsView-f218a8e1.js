import{_ as v,a as w,c,e as u,w as m,b as t,q as n,f as P,t as l,s as g,F as h,l as L,d as k,r as p,o as d,u as B,p as T,g as E}from"./index-eb40b062.js";import{c as V}from"./cart-32b0df4d.js";import{S as _}from"./sweetalert2.all-1660c688.js";import{P as I}from"./PaginationComponent-997d3b01.js";import{_ as S}from"./pikachu_gif-ecacffd9.js";const{VITE_URL:y,VITE_PATH:f}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},D={data(){return{isready:!1,isLoading:!1,fullPage:!1,products:[],productCategory:[],category:"",pagination:{},page:1}},computed:{isDisable(){return this.$pinia.state.value.cart.isDisable}},methods:{...w(V,["addToCart"]),getProducts(i=1,e="全部商品"){this.page=i,this.category=e,this.$http.get(`${y}/v2/api/${f}/products/?page=${i}`).then(r=>{this.products=r.data.products,this.pagination=r.data.pagination,e==="全部商品"?(this.productCategory=this.products,this.isready=!0,this.isLoading=!1):this.getCategory(e)}).catch(r=>{this.isLoading=!1,_.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${r.response.data.message}`})})},getCategory(i){this.$http.get(`${y}/v2/api/${f}/products/all`).then(e=>{this.productCategory=[],e.data.products.forEach(r=>{r.category===i&&this.productCategory.push(r)}),this.isready=!0,this.isLoading=!1}).catch(e=>{this.isLoading=!1,_.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${e.response.data.message}`})})}},components:{Pagination:I},mounted(){this.isLoading=!0,this.category=this.$route.params.category,this.getProducts(void 0,this.category)}},R=i=>(T("data-v-d0313000"),i=i(),E(),i),N=R(()=>t("img",{src:S,alt:"會動的皮卡丘過場圖"},null,-1)),j={key:0,class:"container"},A={class:"row pt-5 d-flex flex-column flex-md-row"},O={class:"col-md-3"},U={class:"p-0 text-center d-flex flex-md-column justify-content-between flex-wrap"},$={class:"col-md-9"},z={class:"p-1 d-flex justify-content-center justify-content-lg-start text-white fs-5 bg-myBgCard"},F={key:0},H={class:"row productCardWrap"},M={class:"card bg-myBgCard productCard"},W=["src"],q={class:"p-3"},G={class:"pb-3 text-start text-white"},J={class:"text-start text-white"},K={class:"d-flex justify-content-center"},Q=["onClick"];function X(i,e,r,Y,s,a){const b=p("LoadingItem"),C=p("RouterLink"),x=p("Pagination");return d(),c(h,null,[u(b,{active:s.isLoading,"z-index":1060,opacity:0},{default:m(()=>[N]),_:1},8,["active"]),s.isready?(d(),c("div",j,[t("div",A,[t("div",O,[t("ul",U,[t("li",{type:"button",class:n(["btn border-white bg-myBgCard text-myColor mb-2 fs-4 productList",s.category==="全部商品"?"text-myColor":"text-white"]),onClick:e[0]||(e[0]=o=>a.getProducts("全部商品"))}," 全部商品 ",2),t("li",{type:"button",class:n(["btn border-white bg-myBgCard mb-2 fs-4 productList",s.category==="單卡"?"text-myColor":"text-white"]),onClick:e[1]||(e[1]=o=>a.getProducts(void 0,"單卡"))}," 單卡 ",2),t("li",{type:"button",class:n(["btn border-white bg-myBgCard mb-2 fs-4 productList",s.category==="牌組"?"text-myColor":"text-white"]),onClick:e[2]||(e[2]=o=>a.getProducts(void 0,"牌組"))}," 牌組 ",2),t("li",{type:"button",class:n(["btn border-white bg-myBgCard mb-2 fs-4 productList",s.category==="禮盒"?"text-myColor":"text-white"]),onClick:e[3]||(e[3]=o=>a.getProducts(void 0,"禮盒"))}," 禮盒 ",2),t("li",{type:"button",class:n(["btn border-white bg-myBgCard mb-2 fs-4 productList",s.category==="周邊"?"text-myColor":"text-white"]),onClick:e[4]||(e[4]=o=>a.getProducts(void 0,"周邊"))}," 周邊 ",2)])]),t("div",$,[t("div",z,[P(" 全部商品 "),s.category!=="全部商品"?(d(),c("div",F,"/"+l(s.category),1)):g("",!0)]),t("div",H,[(d(!0),c(h,null,L(s.productCategory,o=>(d(),c("div",{class:"col-md-6 col-lg-4 p-3",key:o.id},[t("div",M,[u(C,{to:`/product/${o.id}`,class:"hover-pointer text-decoration-none"},{default:m(()=>[t("img",{src:o.imageUrl,class:"card-img-top",alt:"商品圖片"},null,8,W),t("div",q,[t("div",G,l(o.title),1),t("div",J," NT$ "+l(o.price),1)])]),_:2},1032,["to"]),t("div",K,[t("button",{class:n([{disabled:a.isDisable},"w-100 btn border-myColor bg-myBgCard text-myColor px-5 productBtn"]),onClick:B(Z=>i.addToCart(o.id,o.title),["prevent"])}," 加入購物車 ",10,Q)])])]))),128))]),s.category=="全部商品"?(d(),k(x,{key:0,pages:s.pagination,onEmitPages:a.getProducts},null,8,["pages","onEmitPages"])):g("",!0)])])])):g("",!0)],64)}const rt=v(D,[["render",X],["__scopeId","data-v-d0313000"]]);export{rt as default};
