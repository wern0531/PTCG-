import{_ as I,r as l,s as S,c as i,e as $,x as A,y as D,d as t,F as h,v as b,f as O,t as f,g as C,B as U,l as v,a as N,b as c,A as k,w as j,u as T,C as F}from"./index-e70cc059.js";import{c as H}from"./cart-c39e7dc2.js";import{S as g}from"./sweetalert2.all-5c73a78b.js";import{_ as M}from"./LoadingComponent-373f4853.js";import{_ as W}from"./PaginationComponent-4e1958eb.js";import"./pikachu_gif-ecacffd9.js";const z={class:"container"},G={class:"row w-100 pt-5 d-flex flex-column flex-md-row"},q={class:"col-md-3"},J={class:"p-0 text-center d-flex flex-md-column justify-content-between flex-wrap"},K=["onClick"],Q={class:"col-md-9"},X={class:"p-1 d-flex justify-content-center justify-content-lg-start text-white fs-5 bg-myBgCard"},Y={key:0},Z={class:"row productCardWrap"},ee={class:"card bg-myBgCard productCard overflow-hidden"},te=["src"],ae={class:"p-3"},se={class:"pb-3 text-start text-white"},oe={class:"text-start text-white"},le={class:"d-flex justify-content-center"},ce=["onClick"],ne={__name:"ProductsView",setup(re){const{VITE_URL:d,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},s=l(!1),n=l(!1),p=l([]),r=l(""),_=l({}),m=l(""),x=H(),{isDisable:V}=S(x),{addToCart:B}=x,w=(o="全部商品")=>{n.value=!1,s.value=!0,r.value=o,o==="全部商品"?v.get(`${d}v2/api/${u}/products`).then(e=>{p.value=e.data.products,_.value=e.data.pagination,m.value=e.data.pagination.total_pages,n.value=!0,s.value=!1}).catch(e=>{s.value=!1,g.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${e.response.data.message}`})}):P(o)};w();const P=o=>{v.get(`${d}v2/api/${u}/products?category=${encodeURIComponent(o)}`).then(e=>{p.value=e.data.products,_.value=e.data.pagination,m.value=e.data.pagination.total_pages,n.value=!0,s.value=!1}).catch(e=>{s.value=!1,g.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${e.response.data.message}`})})},R=o=>{s.value=!0,r.value==="全部商品"?v.get(`${d}v2/api/${u}/products?page=${o}`).then(e=>{window.scrollTo(0,0),_.value=e.data.pagination,p.value=e.data.products,n.value=!0,s.value=!1}).catch(e=>{s.value=!1,g.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${e.response.data.message}`})}):v.get(`${d}v2/api/${u}/products?page=${o}&category=${encodeURIComponent(r.value)}`).then(e=>{window.scrollTo(0,0),_.value=e.data.pagination,p.value=e.data.products,n.value=!0,s.value=!1}).catch(e=>{s.value=!1,g.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${e.response.data.message}`})})},y=l([]);return(()=>{v.get(`${d}v2/api/${u}/products/all`).then(o=>{y.value=["全部商品",...new Set(o.data.products.map(e=>e.category))]})})(),(o,e)=>{const E=N("RouterLink");return c(),i(h,null,[$(M,{"is-loading":s.value},null,8,["is-loading"]),A(t("div",z,[t("div",G,[t("div",q,[t("ul",J,[(c(!0),i(h,null,b(y.value,a=>(c(),i("li",{type:"button",class:k(["btn border-white bg-myBgCard mb-2 fs-4 productList",r.value===a?"text-myColor":"text-white"]),key:a,onClick:L=>w(a)},f(a),11,K))),128))])]),t("div",Q,[t("div",X,[O(" 全部商品 "),r.value!=="全部商品"?(c(),i("div",Y,"/"+f(r.value),1)):C("",!0)]),t("div",Z,[(c(!0),i(h,null,b(p.value,a=>(c(),i("div",{class:"col-md-6 col-lg-4 p-3",key:a.id},[t("div",ee,[$(E,{to:`/product/${a.id}`,class:"hover-pointer text-decoration-none"},{default:j(()=>[t("img",{src:a.imageUrl,class:"card-img-top",alt:"商品圖片"},null,8,te),t("div",ae,[t("div",se,f(a.title),1),t("div",oe," NT$ "+f(a.price),1)])]),_:2},1032,["to"]),t("div",le,[t("button",{class:k([{disabled:T(V)},"w-100 btn border-myColor bg-myBgCard text-myColor px-5 productBtn"]),onClick:F(L=>T(B)(a.id,a.title),["prevent"])}," 加入購物車 ",10,ce)])])]))),128))]),m.value>1?(c(),U(W,{key:0,pages:_.value,onEmitPages:R},null,8,["pages"])):C("",!0)])])],512),[[D,n.value]])],64)}}},ge=I(ne,[["__scopeId","data-v-44e454e9"]]);export{ge as default};
