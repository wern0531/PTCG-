import{k as l,l as r}from"./index-e5169fb6.js";import{S as e}from"./sweetalert2.all-66feddcb.js";const{VITE_URL:i,VITE_PATH:o}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},d=l("cart",{state:()=>({carts:[],isDisable:!1}),getters:{getCartNum(t){return t.carts.length}},actions:{getCarts(){r.get(`${i}v2/api/${o}/cart`).then(t=>{this.carts=t.data.data.carts}).catch(t=>{e.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${t.response.data.message}`})})},addToCart(t,a,s=1){this.isDisable=!0;const n={product_id:t,qty:s};r.post(`${i}/v2/api/${o}/cart`,{data:n}).then(c=>{this.getCarts(),e.fire({backdrop:!1,icon:"success",title:`${a} 已成功選購`,showConfirmButton:!0,timer:1500})}).then(()=>{this.isDisable=!1}).catch(c=>{e.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${c.response.data.message}`})})},delCart(t,a){this.isDisable=!0,r.delete(`${i}/v2/api/${o}/cart/${t}`).then(s=>{this.getCarts(),e.fire({backdrop:!1,icon:"success",title:`商品 ${a} 已刪除`,showConfirmButton:!0,timer:1500})}).then(()=>{this.isDisable=!1}).catch(s=>{e.fire({backdrop:!1,icon:"error",title:"Oops...",text:`${s.response.data.message}`})})}}});export{d as c};
