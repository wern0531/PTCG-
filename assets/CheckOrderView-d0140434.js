import{_ as f,a as m,c as d,b as t,l as r,t as o,F as h,j as v,q as y,o as n,p as g,f as x}from"./index-6d7628c8.js";import{c as I}from"./cart-af6baffb.js";import{S as l}from"./sweetalert2.all-4148aa19.js";const{VITE_URL:u,VITE_PATH:p}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},O={data(){return{carts:[],order:[],orderId:""}},methods:{...m(I,["getCarts"]),getOrder(){this.$http.get(`${u}v2/api/${p}/order/${this.orderId}`).then(s=>{this.order=s.data.order}).catch(s=>{l.fire({icon:"error",title:"Oops...",text:`${s}.response.data.message`})})},payOrder(){this.$http.post(`${u}v2/api/${p}/pay/${this.orderId}`).then(()=>{this.getCarts(),l.fire({position:"top-center",icon:"success",title:"付款完成",showConfirmButton:!1,timer:1500}),this.$router.push({path:"/cart/completeOrder",query:{orderId:this.order.id,orderData:JSON.stringify(this.order)}})}).catch(s=>{this.isLoading=!1,l.fire({icon:"error",title:"Oops...",text:`${s}.response.data.message`})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},e=s=>(g("data-v-8fef8382"),s=s(),x(),s),w=e(()=>t("div",null,"訂單資訊",-1)),T=e(()=>t("hr",null,null,-1)),C={class:"container justify-content-center"},V={class:"row"},k={class:"col-lg-6"},E={class:"row"},S=e(()=>t("div",{class:"col-3 text-start"},[r(" 姓名 "),t("hr"),r(" Email "),t("hr"),r(" 電話 "),t("hr"),r(" 地址 "),t("hr"),r(" 付款狀態 ")],-1)),$={class:"col-9 text-start"},b=e(()=>t("hr",null,null,-1)),j=e(()=>t("hr",null,null,-1)),B=e(()=>t("hr",null,null,-1)),N=e(()=>t("hr",null,null,-1)),D={key:0},L={key:1,class:"text-success"},A={class:"col-lg-6 mt-5 mt-lg-0"},P=e(()=>t("div",null,[t("div",{class:"row"},[t("div",{class:"col-4 ms-auto"},"品名"),t("div",{class:"col-3"},"數量"),t("div",{class:"col-2"},"單價")])],-1)),R=e(()=>t("hr",null,null,-1)),U={class:"col-3"},q=["src"],F={class:"col-4 d-flex align-items-center justify-content-center"},H={class:"col-3 d-flex align-items-center justify-content-center"},M={class:"col-2 d-flex align-items-center justify-content-center"},G=e(()=>t("hr",null,null,-1)),J={class:"row"},W=e(()=>t("div",{class:"col-3 ms-auto"},"總計:",-1)),z={class:"col-2 d-flex align-items-center justify-content-center"},K={key:0,class:"text-end mt-3"};function Q(s,a,X,Y,c,_){return n(),d(h,null,[w,T,t("div",C,[t("div",V,[t("div",k,[t("div",E,[S,t("div",$,[r(o(c.order.user.name)+" ",1),b,r(" "+o(c.order.user.email)+" ",1),j,r(" "+o(c.order.user.tel)+" ",1),B,r(" "+o(c.order.user.address)+" ",1),N,c.order.is_paid?(n(),d("span",L,"付款完成")):(n(),d("span",D,"尚未付款"))])])]),t("div",A,[P,R,t("div",null,[(n(!0),d(h,null,v(c.order.products,i=>(n(),d("div",{class:"row mb-2",key:i.id},[t("div",U,[t("img",{style:{width:"60px"},src:i.product.imageUrl,alt:""},null,8,q)]),t("div",F,o(i.product.title),1),t("div",H,o(i.qty)+"/"+o(i.product.unit),1),t("div",M," $NT"+o(i.final_total),1)]))),128)),G,t("div",J,[W,t("div",z," $NT"+o(c.order.total),1)]),c.order.is_paid===!1?(n(),d("div",K,[t("button",{class:"btn text-myColor btn-myBgMain border-myColor",onClick:a[0]||(a[0]=(...i)=>_.payOrder&&_.payOrder(...i))}," 確認付款去 ")])):y("",!0)])])])])],64)}const st=f(O,[["render",Q],["__scopeId","data-v-8fef8382"]]);export{st as default};
