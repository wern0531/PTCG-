import{_ as b,a as f,R as y,c as d,b as t,n as r,F as C,j as x,e as h,w,t as m,q as T,r as p,o as _,u as k,v as P,p as V,f as S}from"./index-3b8896d2.js";import{c as I}from"./cart-e6e8c6c1.js";import"./sweetalert2.all-bf120aed.js";const D="/PTCGTrainerWeb/assets/town_league-efac9861.png",E="/PTCGTrainerWeb/assets/regional_league-4b79f9c4.png",R="/PTCGTrainerWeb/assets/championships-075c3d46.png",B="/PTCGTrainerWeb/assets/wcs-4667db09.png";const{VITE_URL:q,VITE_PATH:U}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},j={data(){return{carts:[],loadingItem:"",currentPath:"/cart"}},methods:{...f(I,["getCarts","delCart"]),updateQty(s,i,l,u){let c={};u==="add"?c={product_id:s,qty:i+=1}:u==="reduce"&&(c={product_id:s,qty:i-=1}),this.loadingItem=s,this.$http.put(`${q}v2/api/${U}/cart/${l}`,{data:c}).then(o=>{this.getCarts(),this.loadingItem=""}).catch(o=>{alert(o.response.data.message)})},calculateFinalTotal(s){return s.reduce((i,l)=>i+l.total,0)},nextStep(){this.$router.push("/cart/information")},isCurrentPath(s){return this.currentPath.includes(s)}},computed:{cartsData(){return this.$pinia.state.value.cart.carts}},watch:{$route:function(s,i){this.currentPath=s.path}},components:{RouterView:y},mounted(){this.getCarts()}},n=s=>(V("data-v-8a2aa114"),s=s(),S(),s),G={class:"container"},N={class:"row my-5 align-items-stretch"},W={class:"col-lg-3"},A=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:D,alt:""})],-1)),F=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 商品確認 ",-1)),L=[F],O={class:"col-lg-3"},M=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:E,alt:""})],-1)),Q=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 填寫資料 ",-1)),H=[Q],$={class:"col-lg-3"},z=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:R,alt:""})],-1)),J=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 確認訂單 ",-1)),K=[J],X={class:"col-lg-3"},Y=n(()=>t("div",{class:"d-none d-lg-block"},[t("img",{class:"mb-2",src:B,alt:""})],-1)),Z=n(()=>t("div",{class:"d-flex align-items-center justify-content-center flex-column"}," 完成訂單 ",-1)),tt=[Z],et={key:0},st={class:"cartItem row p-3 mb-2 border border-btnBg rounded-3 d-flex align-items-center"},ot={class:"col-lg-2"},nt=["src"],ct={class:"mt-2 mt-lg-0 col-lg-3"},it={class:"mt-2 mt-lg-0 col-lg-2"},lt={class:"input-group"},at=["onClick","disabled"],dt=["onUpdate:modelValue"],rt=["onClick","disabled"],_t={class:"mt-2 mt-lg-0 col-lg-3"},ut=["onClick"],mt=n(()=>t("span",{type:"button",class:"material-symbols-outlined"}," delete ",-1)),ht=[mt],pt={class:"mt-3 row d-flex align-items-center"},gt={class:"col-lg-2"},vt=n(()=>t("div",{class:"material-symbols-outlined"},"arrow_back",-1)),bt=n(()=>t("div",null,"繼續選購",-1)),ft={class:"col-lg-5 d-flex ms-auto align-items-center"},yt={class:"col-lg-6"},Ct={class:"col-lg-4 ms-auto"};function xt(s,i,l,u,c,o){const g=p("router-link"),v=p("RouterView");return _(),d("div",G,[t("div",N,[t("div",W,[A,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart"}])},L,2)]),t("div",O,[M,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart/information"}])},H,2)]),t("div",$,[z,t("div",{class:r(["step mt-3",{nowStep:o.isCurrentPath("/cart/checkOrder")}])},K,2)]),t("div",X,[Y,t("div",{class:r(["step mt-3",{nowStep:c.currentPath==="/cart/completeOrder"}])},tt,2)])]),c.currentPath==="/cart"?(_(),d("div",et,[(_(!0),d(C,null,x(o.cartsData,e=>(_(),d("div",{class:"",key:e.id},[t("div",st,[t("div",ot,[t("img",{style:{width:"100px"},src:e.product.imageUrl,alt:""},null,8,nt)]),t("div",ct,m(e.product.title),1),t("div",it,[t("div",lt,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:a=>o.updateQty(e.product_id,e.qty,e.id,"reduce"),disabled:e.product.id===c.loadingItem}," - ",8,at),k(t("input",{type:"text",class:"btn form-control text-center","onUpdate:modelValue":a=>e.qty=a,min:"0",disabled:""},null,8,dt),[[P,e.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-outline-secondary",type:"button",onClick:a=>o.updateQty(e.product_id,e.qty,e.id,"add"),disabled:e.product.id===c.loadingItem}," + ",8,rt)])]),t("div",_t,"$NT"+m(e.total),1),t("div",{class:"mt-2 mt-lg-0 col-lg-2 delBtn",onClick:a=>s.delCart(e.id,e.product.title)},ht,8,ut)])]))),128)),t("div",pt,[t("div",gt,[h(g,{type:"button",class:"btn d-flex btn-myBgMain",to:"/products/全部商品"},{default:w(()=>[vt,bt]),_:1})]),t("div",ft,[t("div",yt," 總計: $NT"+m(o.calculateFinalTotal(o.cartsData)),1),t("div",Ct,[t("button",{type:"button",class:"btn text-myColor border-myColor btn-hover",onClick:i[0]||(i[0]=(...e)=>o.nextStep&&o.nextStep(...e))},"確認訂單")])])])])):T("",!0),h(v)])}const Pt=b(j,[["render",xt],["__scopeId","data-v-8a2aa114"]]);export{Pt as default};
