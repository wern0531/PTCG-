import{_ as f,a as x,R as C,c,b as t,q as l,F as y,l as T,e as u,w as k,t as _,s as B,r as p,o as h,v as L,x as P,p as S,g as V,n as v}from"./index-7ba7e1c6.js";import{c as M}from"./cart-c5e699fb.js";import{S as b}from"./sweetalert2.all-e9be79ae.js";const z="/PTCGTrainerWeb/assets/town_league-efac9861.png",D="/PTCGTrainerWeb/assets/regional_league-4b79f9c4.png",I="/PTCGTrainerWeb/assets/championships-075c3d46.png",R="/PTCGTrainerWeb/assets/wcs-4667db09.png";const{VITE_URL:E,VITE_PATH:q}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"wern",BASE_URL:"/PTCGTrainerWeb/",MODE:"production",DEV:!1,PROD:!0},N={data(){return{carts:[],loadingItem:"",currentPath:"/cart"}},methods:{...x(M,["getCarts","delCart"]),updateQty(e,o,n,g){let a={};g==="add"?a={product_id:e,qty:o+=1}:g==="reduce"&&(a={product_id:e,qty:o-=1}),this.loadingItem=e,this.$http.put(`${E}v2/api/${q}/cart/${n}`,{data:a}).then(d=>{this.getCarts(),this.loadingItem=""}).catch(d=>{b.fire({icon:"error",title:"Oops...",text:`${d.response.data.message}`})})},calculateFinalTotal(e){return e.reduce((o,n)=>o+n.total,0)},nextStep(){this.$router.push("/cart/information")},isCurrentPath(e){return this.currentPath.includes(e)}},computed:{cartsData(){return this.$pinia.state.value.cart.carts},isDisable(){return this.$pinia.state.value.cart.isDisable}},watch:{$route:function(e,o){this.currentPath=e.path},cartsData:function(e){this.$route.path==="/cart"&&e.length===0&&b.fire({icon:"warning",title:"您的購物車空啦~",text:"來去看看其他商品吧!!"}).then(()=>{this.$router.push("/products/全部商品")})}},components:{RouterView:C},mounted(){this.getCarts()}},i=e=>(S("data-v-d3dfd36b"),e=e(),V(),e),U={class:"container"},G={class:"row my-5 align-items-stretch"},O={class:"col-lg-3"},W=i(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:z,alt:"購物流程步驟一"})],-1)),$=v('<div class="me-2" data-v-d3dfd36b>商品確認</div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg>',4),A=[$],F={class:"col-lg-3"},Q=i(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:D,alt:"購物流程步驟二"})],-1)),H=v('<div class="me-2" data-v-d3dfd36b>填寫資料</div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg>',4),j=[H],J={class:"col-lg-3"},K=i(()=>t("div",{class:"d-none d-lg-block"},[t("img",{src:I,alt:"購物流程步驟三"})],-1)),X=v('<div class="me-2" data-v-d3dfd36b>確認訂單</div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg>',4),Y=[X],Z={class:"col-lg-3"},tt=i(()=>t("div",{class:"d-none d-lg-block"},[t("img",{class:"mb-2",src:R,alt:"購物流程步驟四"})],-1)),et=v('<div class="me-2" data-v-d3dfd36b>完成訂單</div><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16" data-v-d3dfd36b><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" data-v-d3dfd36b></path></svg>',4),st=[et],dt={key:0},at={class:"row p-3 mx-0 mb-2 border border-btnBg rounded-3 d-flex align-items-center"},ot={class:"col-lg-2"},it=["src"],lt={class:"mt-2 mt-lg-0 col-lg-3"},nt={class:"mt-2 mt-lg-0 col-lg-2"},rt={class:"input-group"},ct=["onClick","disabled"],ht=["onUpdate:modelValue"],vt=["onClick","disabled"],gt={class:"mt-2 mt-lg-0 col-lg-3"},_t=["onClick"],ut=i(()=>t("span",{class:"material-symbols-outlined"}," delete ",-1)),pt=[ut],bt={class:"mt-3 mx-0 row d-flex align-items-center"},mt={class:"col-lg-2"},wt=i(()=>t("div",{class:"material-symbols-outlined"},"arrow_back",-1)),ft=i(()=>t("div",null,"繼續選購",-1)),xt={class:"col-lg-5 d-flex ms-auto align-items-center"},Ct={class:"col-lg-6"},yt={class:"col-lg-4 ms-auto"};function Tt(e,o,n,g,a,d){const m=p("RouterLink"),w=p("RouterView");return h(),c("div",U,[t("div",G,[t("div",O,[W,t("div",{class:l(["step mt-3 d-flex align-items-center",{nowStep:a.currentPath==="/cart"}])},A,2)]),t("div",F,[Q,t("div",{class:l(["step mt-3 d-flex align-items-center",{nowStep:a.currentPath==="/cart/information"}])},j,2)]),t("div",J,[K,t("div",{class:l(["step mt-3 d-flex align-items-center",{nowStep:d.isCurrentPath("/cart/checkOrder")}])},Y,2)]),t("div",Z,[tt,t("div",{class:l(["step mt-3 d-flex align-items-center",{nowStep:a.currentPath==="/cart/completeOrder"}])},st,2)])]),a.currentPath==="/cart"?(h(),c("div",dt,[(h(!0),c(y,null,T(d.cartsData,s=>(h(),c("div",{key:s.id},[t("div",at,[t("div",ot,[t("img",{style:{width:"100px"},src:s.product.imageUrl,alt:"商品圖片"},null,8,it)]),t("div",lt,_(s.product.title),1),t("div",nt,[t("div",rt,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:r=>s.qty>1?d.updateQty(s.product_id,s.qty,s.id,"reduce"):null,disabled:s.product.id===a.loadingItem}," - ",8,ct),L(t("input",{type:"text",class:"btn form-control text-center","onUpdate:modelValue":r=>s.qty=r,min:"0",disabled:""},null,8,ht),[[P,s.qty,void 0,{number:!0}]]),t("button",{class:"btn btn-outline-secondary",type:"button",onClick:r=>d.updateQty(s.product_id,s.qty,s.id,"add"),disabled:s.product.id===a.loadingItem}," + ",8,vt)])]),t("div",gt,"$NT"+_(s.total),1),t("button",{type:"button",class:l([{disabled:d.isDisable},"mt-2 mt-lg-0 col-lg-2 btn border-0 text-white delBtn"]),onClick:r=>e.delCart(s.id,s.product.title)},pt,10,_t)])]))),128)),t("div",bt,[t("div",mt,[u(m,{type:"button",class:"btn d-flex btn-myBgMain",to:"/products/全部商品"},{default:k(()=>[wt,ft]),_:1})]),t("div",xt,[t("div",Ct," 總計: $NT"+_(d.calculateFinalTotal(d.cartsData)),1),t("div",yt,[t("button",{type:"button",class:"btn text-myColor border-myColor btn-hover",onClick:o[0]||(o[0]=(...s)=>d.nextStep&&d.nextStep(...s))}," 確認訂單 ")])])])])):B("",!0),u(w)])}const Pt=f(N,[["render",Tt],["__scopeId","data-v-d3dfd36b"]]);export{Pt as default};
